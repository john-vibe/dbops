 <head>
    <meta charset="utf-8">
    <link href="{{static_url('assets/css/bootstrap.min.css')}}" rel="stylesheet" type="text/css" />
    <link href="{{static_url('assets/css/core.css')}}" rel="stylesheet" type="text/css" />
    <link href="{{static_url('assets/css/components.css')}}" rel="stylesheet" type="text/css" />
    <link href="{{static_url('assets/css/icons.css')}}" rel="stylesheet" type="text/css" />
    <link href="{{static_url('assets/css/pages.css')}}" rel="stylesheet" type="text/css" />
    <link href="{{static_url('assets/css/menu.css')}}"  rel="stylesheet" type="text/css" />

    <link href="{{static_url('assets/css/icons/icomoon/styles.css')}}" rel="stylesheet" type="text/css" />
    <link href="{{static_url('plugins/form_wizard/css/components.min.css')}}" rel="stylesheet" type="text/css" />
    <link href="{{static_url('plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css')}}" rel="stylesheet" >

    <link href="{{static_url('plugins/datatables/jquery.dataTables.min.css')}}" rel="stylesheet" type="text/css"/>
    <link href="{{static_url('plugins/datatables/responsive.bootstrap.min.css')}}" rel="stylesheet" type="text/css"/>
    <link href="{{static_url('plugins/datatables/scroller.bootstrap.min.css')}}" rel="stylesheet" type="text/css"/>
    <link href="{{static_url('plugins/datatables/dataTables.bootstrap.min.css')}}" rel="stylesheet" type="text/css"/>
    <link href="{{static_url('plugins/datatables/fixedColumns.dataTables.min.css')}}" rel="stylesheet" type="text/css"/>

    <style>
        .table>thead>tr>th{
            font-weight:normal !important;
            background-color: #73786f;
            color: #dbe2d5;
            text-align:center;
        }
        .modal-lg-detail {
            width:45%;
            height:60%;
            margin-left:500px;
            margin-top:50px;
        }
        .fixed-panel {
          min-height: 180px;
        }

        #active_num_hopson_biz_55,#total_num_hopson_biz_55,#qps_num_hopson_biz_55,#tps_num_hopson_biz_55{
            width:350px;
            height:165px;
        }
        #active_num_hopson_biz_slave_88,#total_num_hopson_biz_slave_88,#qps_num_hopson_biz_slave_88,#tps_num_hopson_biz_slave_88{
            width:350px;
            height:165px;
        }
        #active_num_hopson_bi_54,#total_num_hopson_bi_54,#qps_num_hopson_bi_54,#tps_num_hopson_bi_54{
            width:350px;
            height:165px;
        }

        #monitor_review {
            width:1000px;
            height:280px;
        }
        .modal-lg-detail {
            width:60%;
            height:55%;
            /*min-width: 1200px;*/
            max-height: 300px;
        }
        label {
            display: inline-block;
            width: 150px;
            text-align: right;
        }

    </style>
 </head>
 <body>
    <br>
    <div class="row">
        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-chart-areaspline widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow">用户数</p>
                    <h2><span id='user_num'></span>人 <small><i class="mdi mdi-arrow-up text-success"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->

        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-account-convert widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow" >数据源</p>
                    <h2><span id='db_source_num'></span>个 <small><i class="mdi mdi-arrow-down text-danger"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->

        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-layers widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow" >服务器</p>
                    <h2><span id='server_num'></span>台 <small><i class="mdi mdi-arrow-up text-success"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->

        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-av-timer widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow" >问题单</p>
                    <h2><span id='wtd_num'></span>个 <small><i class="mdi mdi-arrow-down text-danger"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->
        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-av-timer widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow" >SQL工单</p>
                    <h2><span id='sql_num'></span>个 <small><i class="mdi mdi-arrow-down text-danger"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->

        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-av-timer widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow" >代理服务</p>
                    <h2><span id='agent_num'></span>个 <small><i class="mdi mdi-arrow-down text-danger"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->
    </div>
    <div class="row">
        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-account-multiple widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow">备份任务</p>
                    <h2><span id='backup_task_num'></span>个<small><i class="mdi mdi-arrow-down text-danger"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->

        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-download widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow">同步任务</p>
                    <h2><span id='sync_task_num'></span>个<small><i class="mdi mdi-arrow-up text-success"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->

        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-chart-areaspline widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow">监控任务</p>
                    <h2><span id='stats_task_num'></span>个<small><i class="mdi mdi-arrow-up text-success"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->

        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-account-convert widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow" >慢日志任务</p>
                    <h2><span id='slow_task'></span>个<small><i class="mdi mdi-arrow-down text-danger"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->

        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-layers widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow" >图片任务</p>
                    <h2><span id='minio_task'></span>个<small><i class="mdi mdi-arrow-up text-success"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->

        <div class="col-lg-2 col-md-4 col-sm-6">
            <div class="card-box widget-box-one">
                <i class="mdi mdi-av-timer widget-one-icon"></i>
                <div class="wigdet-one-content">
                    <p class="m-0 text-uppercase font-600 font-secondary text-overflow" >归档任务</p>
                    <h2><span id='archive_task'></span>个<small><i class="mdi mdi-arrow-down text-danger"></i></small></h2>
                </div>
            </div>
        </div><!-- end col -->
    </div>

    <!--数据库运行情况 合生通-主库-->
    <div class="row">
          <div class="panel panel-border panel-primary">
                <div class="panel-heading">
                    <h3 id='title_55' class="panel-title">好房-主库[MySQL]</h3>
                </div>
                <div class="panel-body">
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='total_num_hopson_biz_55'></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='active_num_hopson_biz_55'></div>
                             </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='qps_num_hopson_biz_55'></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='tps_num_hopson_biz_55'></div>
                           </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>

    <!--数据库运行情况 合生通-从库-->
    <div class="row">
          <div class="panel panel-border panel-teal">
                <div class="panel-heading">
                    <h3 id='title_88' class="panel-title">好房-从库[MySQL]</h3>
                </div>
                <div class="panel-body">
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='total_num_hopson_biz_slave_88'></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='active_num_hopson_biz_slave_88'></div>
                             </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='qps_num_hopson_biz_slave_88'></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='tps_num_hopson_biz_slave_88'></div>
                           </div>
                        </div>
                    </div>
                </div>
            </div>

    </div>

    <!--数据库运行情况 合生通-BI库-->
    <div class="row">
          <div class="panel panel-border panel-inverse">
                <div class="panel-heading">
                    <h3 id='title_54' class="panel-title">好房-BI库[MySQL]</h3>
                </div>
                <div class="panel-body">
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='total_num_hopson_bi_54'></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                 <div id='active_num_hopson_bi_54'></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='qps_num_hopson_bi_54'></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                         <div class="panel panel-border panel-primary">
                            <div class="panel-body fixed-panel">
                                <div id='tps_num_hopson_bi_54'></div>
                           </div>
                        </div>
                    </div>
                </div>
            </div>

    </div>


     <!--图表放大窗口 -->
    <div id="con-modal-img-win" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
       <div class="modal-dialog modal-lg-detail">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 id='monitor_review_title' class="modal-title">图表预览</h4>
                <input type="hidden" id="monitor_review_title_hidden">
            </div>
            <div class="modal-body">
               <div class="panel panel-flat">
                    <div class="panel-body">
                         <form class="form-horizontal" role="form">
                            <div class="form-group" >
                               <div class="col-md-2">
                                    <div class="input-group">
                                        <label class="control-label">开始日期</label>
                                    </div>
                               </div>
                               <div class="col-md-3">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="ion-ios7-clock-outline"></i></span>
                                        <input  id="begin_date"  type="text" value="" class="form-control datetimepicker"  readonly >
                                        <span class="input-group-addon bg-custom b-0"><i class="mdi mdi-calendar text-white"></i></span>
                                    </div>
                               </div>
                               <div class="text-right col-md-2">
                                    <div class="input-group">
                                      <label class="control-label">结束日期&nbsp;</label>
                                    </div>
                               </div>
                               <div class="col-md-3">
                                  <div class="input-group">
                                      <span class="input-group-addon"><i class="ion-ios7-alarm-outline"></i></span>
                                      <input  id="end_date"  type="text" value="" class="form-control datetimepicker"  readonly  >
                                      <span class="input-group-addon bg-custom b-0"><i class="mdi mdi-calendar text-white"></i></span>
                                  </div>
                               </div>
                               <div class="col-md-2">
                                   <div class="input-group">
                                        <span class="input-group-btn">
                                           <button type="button"  id='query_btn' class="btn waves-effect waves-light btn-primary"><i class="fa fa-search"></i></button>
                                        </span>
                                   </div>
                               </div>

                            </div>
                         </form>
                         <div class="col-md-12">
                             <div class="panel panel-border panel-primary">
                                <div class="panel-body fixed-panel">
                                    <div id='monitor_review'></div>
                                </div>
                            </div>
                        </div>
                    </div>
               </div>
            </div>
         </div>
      </div>
     </div>

    <script src="{{static_url('plugins/datatables/jquery.dataTables.min.js')}}"></script>
    <script src="{{static_url('plugins/echarts/echarts.min.js')}}"></script>
    <script src="{{static_url('plugins/loaders/blockui.min.js')}}"></script>

    <script src="{{static_url('plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js')}}"></script>
    <script src="{{static_url('plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.zh-CN.js')}}"></script>
    <script src="{{static_url('assets/pages/jquery.form-datetime-pickers.init.js')}}"></script>

    <script src="{{static_url('assets/js/utils.js')}}"></script>

    <script>

        function centerModals() {
              $('.modal').each(function(i) {
                var $clone = $(this).clone().css('display', 'block').appendTo('body');
                var top = Math.round(($clone.height() - $clone.find('.modal-content').height()) / 2);
                top = top > 50 ? top : 0;
                $clone.remove();
                $(this).find('.modal-content').css("margin-top", top - 50);
              });
          }

        function start_Loader(p_id) {
            var light = $('#'+p_id).parent();
            $(light).block({
                message: '<i class="icon-spinner spinner"></i>',
                overlayCSS: {
                    backgroundColor: '#fff',
                    opacity: 0.8,
                    cursor: 'wait'
                },
                css: {
                    border: 0,
                    padding: 0,
                    backgroundColor: 'none'
                }
            });
       }

        function end_Loader(p_id) {
            var light = $('#'+p_id).parent();
            $(light).unblock();
        }

        function get_charts(p_item,p_title,p_x_data,p_y_data,p_color) {
              var myChart = echarts.init($('#'+p_item)[0]);
              var option = {
                  title:{
                         text:p_title,
                         left:'center',
                         textStyle:{
                            color:'#a4a4a4',
                            fontStyle:'italic',
                            fontWeight:'bold',
                            fontFamily:'宋体',
                    　　　　 fontSize:10
                        }
                   },
                   grid: {
                       top: '25px',
                       bottom: '20px',
                       right: '15px',
                       left:'20px'
                   },
                   xAxis: {
                        type: 'category',
                        splitLine:{
                           show:false
                        },
                        axisLine: { show: true,lineStyle:{ color:'#6173A3' }},
                        axisLabel:{ textStyle:{color:'#9ea7c4',fontSize:8} },
                        axisTick : {show: false},
                        data: p_x_data
                    },
                    yAxis: {
                        type: 'value',
                        splitLine:{
                           show:false
                        },
                        axisTick : {show:false},
                        splitLine: {show:false},
                        axisLabel: {textStyle:{color:'#9ea7c4',fontSize:8} },
                        axisLine : {show: true,lineStyle:{ color:'#6173A3'}},
                    },
                   tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#6a7985'
                        }
                      }
                    },
                    series: [{
                        data: p_y_data,
                        type: 'line',
                        itemStyle : {
                            normal : {
                              lineStyle:{
                                color:p_color
                              }
                            }
                        },
                        showAllSymbol: false,
                        symbolSize:1,
                        smooth: true
                    }]
              };
              myChart.setOption(option);
        }

        function get_charts_large(p_item,p_title,p_x_data,p_y_data,p_color) {
              var myChart = echarts.init($('#'+p_item)[0]);
              var option = {
                  title:{
                         text:p_title,
                         left:'center',
                         textStyle:{
                            color:'#9ea7c4',
                            fontWeight:'bold',
                            fontFamily:'宋体',
                    　　　　 fontSize:12
                        }
                   },
                   grid: {
                       top: '25px',
                       bottom: '60px',
                       right: '15px',
                       left:'30px'
                   },
                   xAxis: {
                        type: 'category',
                        splitLine:{
                           show:false
                        },
                        axisLine: { show: true,lineStyle:{ color:'#329ba3' }},
                        axisLabel:{
                            textStyle:
                                {  color:'#9ea7c4',
                                   fontSize:8,
                                   fontStyle: 'italic',
                                   fontWeight: 'bold'
                                }
                        },
                        axisTick : {show: false},
                        data: p_x_data
                    },
                    yAxis: {
                        type: 'value',
                        splitLine:{
                           show:false
                        },
                        margin: 5,
                        rotate: 60,
                        axisTick : {show:false},
                        splitLine: {show:false},
                        axisLabel: {textStyle:{color:'#9ea7c4',fontSize:8} },
                        axisLine : {show: true,lineStyle:{ color:'#6173A3'}},
                    },
                   tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#83d5a5'
                        }
                      }
                    },
                  toolbox: {
                        show: true,
                        feature: {
                            saveAsImage: {
                        　　　　show:true,
                        　　　　excludeComponents :['toolbox'],
                        　　　　pixelRatio: 1
                            }
                        }
                    },
                    series: [{
                        data: p_y_data,
                        type: 'line',
                        itemStyle : {
                            normal : {
                              lineStyle:{
                                color:p_color
                              }
                            }
                        },
                        showAllSymbol: false,
                        symbolSize:1,
                        smooth: true
                    }]
              };
              myChart.setOption(option);
        }

        function get_title_by_id(p_id) {
            var id='title_'+p_id.split('_')[p_id.split('_').length - 1];
            return $('#'+id).text()
        }

        function get_contents_from_div(p_id,p_render_id) {
                var db_id=p_id.split('_')[p_id.split('_').length - 1];
                if (p_id.indexOf("total") >= 0 ) {
                      $.ajax({
                            url: "/get/db/active/num",
                            type: "post",
                            data: {
                                 'db_id'     : db_id,
                                 'begin_date': $('#begin_date').val(),
                                 'end_date'  : $('#end_date').val()
                            },
                            datatype: "json",
                            beforeSend: function () {
                                start_Loader(p_render_id)
                            },
                            complete: function () {
                                end_Loader(p_render_id)
                            },
                            success: function (dataSet) {
                                get_charts(p_render_id, '总连接数',dataSet['amount']['x_total'], dataSet['amount']['y_total'],'#6495ED')
                                get_charts(p_render_id.replace('total','active'), '活跃连接数',dataSet['amount']['x'], dataSet['amount']['y'],'#6495ED')
                                get_charts(p_render_id.replace('total','qps'), '每秒查询数',dataSet['amount']['x_qps'], dataSet['amount']['y_qps'],'#6495ED')
                                get_charts(p_render_id.replace('total','tps'), '每秒事务数',dataSet['amount']['x_tps'], dataSet['amount']['y_tps'],'#6495ED')
                            }
                      });

                }  else if (p_id.indexOf("order") >= 0 ) {
                    $.ajax({
                        url: "/get/db/order/num",
                        type: "post",
                        datatype: "json",
                        beforeSend: function () {
                            start_Loader(p_render_id)
                        },
                        complete: function () {
                            end_Loader(p_render_id)
                        },
                        success: function (dataSet) {
                            console.log(dataSet)
                            get_charts_bar(p_render_id, '',dataSet['amount']['x'], dataSet['amount']['y'],'#6495ED')
                        }
                    });
                }
            }

        function get_contents_from_div_large(p_id,p_render_id) {
                var dbid=p_id.split('_')[p_id.split('_').length - 1];
                if (p_id.indexOf("total") >= 0 ) {
                      $.ajax({
                            url: "/get/db/active/num",
                            type: "post",
                            data: {
                                'db_id'     : dbid,
                                'begin_date': $('#begin_date').val(),
                                'end_date'  : $('#end_date').val()
                            },
                            datatype: "json",
                            beforeSend: function () {
                                start_Loader(p_render_id)
                            },
                            complete: function () {
                                end_Loader(p_render_id)
                            },
                            success: function (dataSet) {
                                get_charts_large(p_render_id,'总连接数',dataSet['amount']['x_total'], dataSet['amount']['y_total'],'#edc4a7')
                            }
                      });

                }  else if (p_id.indexOf("active") >= 0 ) {
                    $.ajax({
                        url: "/get/db/active/num",
                        type: "post",
                        data: {
                             'db_id'     : dbid,
                             'begin_date': $('#begin_date').val(),
                             'end_date'  : $('#end_date').val()
                        },
                        datatype: "json",
                        beforeSend: function () {
                            start_Loader(p_render_id)
                        },
                        complete: function () {
                            end_Loader(p_render_id)
                        },
                        success: function (dataSet) {
                            get_charts_large(p_render_id, '活跃连接数',dataSet['amount']['x'], dataSet['amount']['y'],'#99a347')
                        }
                    });
                }  else if (p_id.indexOf("qps") >= 0 ) {
                     $.ajax({
                        url: "/get/db/active/num",
                        type: "post",
                        data: {
                             'db_id'     : dbid,
                             'begin_date': $('#begin_date').val(),
                             'end_date'  : $('#end_date').val()
                        },
                        datatype: "json",
                        beforeSend: function () {
                            start_Loader(p_render_id)
                        },
                        complete: function () {
                            end_Loader(p_render_id)
                        },
                        success: function (dataSet) {
                            get_charts_large(p_render_id, '每秒查询数',dataSet['amount']['x_qps'], dataSet['amount']['y_qps'],'#a47278')
                        }
                    });

                }  else if (p_id.indexOf("tps") >= 0 ) {
                     $.ajax({
                        url: "/get/db/active/num",
                        type: "post",
                        data: {
                              'db_id'     : dbid,
                              'begin_date': $('#begin_date').val(),
                              'end_date'  : $('#end_date').val()
                        },
                        datatype: "json",
                        beforeSend: function () {
                            start_Loader(p_render_id)
                        },
                        complete: function () {
                            end_Loader(p_render_id)
                        },
                        success: function (dataSet) {
                            get_charts_large(p_render_id, '每秒事务数',dataSet['amount']['x_tps'], dataSet['amount']['y_tps'],'#6495ed')
                        }
                    });

                }
            }

        function set_sys_status_values() {
             $.ajax({
                    url: "/get/sys/stats/idx",
                    type: "post",
                    datatype: "json",
                    beforeSend: function () {
                        start_Loader('user_num')
                        start_Loader('db_source_num')
                        start_Loader('server_num')
                        start_Loader('wtd_num')
                        start_Loader('sql_num')
                        start_Loader('agent_num')
                        start_Loader('backup_task_num')
                        start_Loader('sync_task_num')
                        start_Loader('stats_task_num')
                        start_Loader('slow_task')
                        start_Loader('minio_task')
                        start_Loader('archive_task')
                    },
                    complete: function () {
                        end_Loader('user_num')
                        end_Loader('db_source_num')
                        end_Loader('server_num')
                        end_Loader('wtd_num')
                        end_Loader('sql_num')
                        end_Loader('agent_num')
                        end_Loader('backup_task_num')
                        end_Loader('sync_task_num')
                        end_Loader('stats_task_num')
                        end_Loader('slow_task')
                        end_Loader('minio_task')
                        end_Loader('archive_task')
                    },
                    success: function (dataSet) {
                        $('#user_num').text(dataSet['user_num'])
                        $('#db_source_num').text(dataSet['db_source_num'])
                        $('#server_num').text(dataSet['server_num'])
                        $('#wtd_num').text(dataSet['wtd_num'])
                        $('#sql_num').text(dataSet['sql_num'])
                        $('#agent_num').text(dataSet['agent_num'])
                        $('#backup_task_num').text(dataSet['backup_task_num'])
                        $('#sync_task_num').text(dataSet['sync_task_num'])
                        $('#stats_task_num').text(dataSet['stats_task_num'])
                        $('#slow_task').text(dataSet['slow_task'])
                        $('#minio_task').text(dataSet['minio_task'])
                        $('#archive_task').text(dataSet['archive_task'])
                    }
              });
        }

        $(document).ready(function() {

            $('#begin_date').val(GetDate(3));
            $('#end_date').val(GetDate(2));

            set_sys_status_values();

            $(".fixed-panel>div").each(function(){
               id = $(this).attr('id');
               if (!(id===undefined) && (id!='monitor_review') &&(id.indexOf('total')>=0)) {
                   get_contents_from_div(id,id)
               }
            });

        });

        $('.fixed-panel>div').click(function(){
            var id = $(this).attr('id');
            $('#begin_date').val(GetDate(3));
            $('#end_date').val(GetDate(2));
            get_contents_from_div_large(id,'monitor_review');
            $('#monitor_review_title').text(get_title_by_id(id));
            $('#monitor_review_title_hidden').val(id);
            $('.modal').on('show.bs.modal', centerModals);
            $(window).on('resize', centerModals);
            $('#con-modal-img-win').modal({
                  keyboard: false,
                  backdrop:false
            });
        });

        $('#query_btn').click(function(){
           id = $('#monitor_review_title_hidden').val()
           get_contents_from_div(id,'monitor_review');
        });

    </script>

 </body>